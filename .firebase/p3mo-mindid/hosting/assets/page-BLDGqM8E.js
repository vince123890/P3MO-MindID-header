import{f as y,u as g,a as n,j as d}from"./@react-router-BOJM2k20.js";import{P as k}from"./index-BafWvN44.js";import{R as j}from"./risk-form-VQW55dr5.js";import{a as R,p}from"./risks-BS2_D_ps.js";import{F as x}from"./index-DDk6ch2l.js";import{M as I}from"./index-C_i7UN8L.js";import{s as i}from"./index-Cskjed0c.js";import"./index-QOKA2q-x.js";import"./reactNode-Csz1gYGy.js";import"./index-BHxSUtD9.js";import"./index-BGD_4JXV.js";import"./Skeleton-BKwTcTmI.js";import"./index-CrLFCoSO.js";import"./PlusOutlined-DDuQXVnN.js";import"./use-form-error-handling-Dj-OCOIU.js";import"./index-BpdQMdSc.js";import"./Input-CgaMpdgX.js";import"./index-HUJMorX5.js";import"./PlusOutlined-Dx_yv4bP.js";import"./AntdIcon-DUdM8fG5.js";import"./DeleteOutlined-DO7ccZ5J.js";import"./useForm-CJYsS5GE.js";import"./ExclamationCircleFilled-C_fPh9YD.js";import"./InfoCircleFilled-D4ctpFmw.js";import"./index-DPug0LmA.js";import"./useClosable-q7p4GCca.js";import"./extendsObject-CT8lAb9A.js";import"./context-BclqCKk2.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="fa136021-c4ec-4b67-92e9-917f12fb1617",t._sentryDebugIdIdentifier="sentry-dbid-fa136021-c4ec-4b67-92e9-917f12fb1617")}catch{}const X=()=>{const{id:t,riskId:o}=y(),s=g(),[f]=x.useForm(),[m,a]=n.useState(!1),[e,u]=n.useState(null);n.useEffect(()=>{(async()=>{a(!0);try{const r=await R(o);r.data?u(r.data):(i.error("Risk not found"),s(`/projects/${t}`))}catch{i.error("Failed to fetch risk data"),s(`/projects/${t}`)}finally{a(!1)}})()},[o,t,s]);const b=[{label:"Projects",path:"/projects"},{label:"Project Detail",path:`/projects/${t}`},{label:"Risks",path:`/projects/${t}/risks`},{label:`Edit Risk ${(e==null?void 0:e.nomor_resiko)||o}`,path:`/projects/${t}/risks/${o}/update`}],l=c=>{a(!0),setTimeout(()=>{try{const r=p.data.items.findIndex(h=>h.id===o);r!==-1?(p.data.items[r]={...p.data.items[r],...c,updated_at:new Date().toISOString()},i.success("Risk updated successfully"),s(`/projects/${t}`)):i.error("Risk not found")}catch{i.error("Failed to update risk")}finally{a(!1)}},1e3)};return d.jsx(k,{title:`Edit Risk - ${(e==null?void 0:e.nomor_resiko)||"Loading..."}`,breadcrumbs:b,loading:m,children:d.jsx(I,{title:`Edit Risk - ${(e==null?void 0:e.nomor_resiko)||"Loading..."}`,open:!0,onCancel:()=>s(-1),footer:null,width:1200,centered:!0,styles:{body:{maxHeight:"80vh",overflowY:"auto"}},children:d.jsx(j,{formProps:{form:f,onFinish:l},initialData:e,loading:m,isEdit:!0,onSubmit:l})})})};export{X as Component,X as default};
//# sourceMappingURL=page-BLDGqM8E.js.map
