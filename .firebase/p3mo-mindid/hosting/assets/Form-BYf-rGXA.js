import{u as P,a as m,j as e}from"./@react-router-BOJM2k20.js";import{S as A,R as h,C as s,F as E}from"./index-BafWvN44.js";import{S as p}from"./index-BGD_4JXV.js";import{u as F}from"./use-form-error-handling-Dj-OCOIU.js";import{a as M}from"./index-CQiuoa1n.js";import{F as n}from"./index-DDk6ch2l.js";import{I as f}from"./index-BpdQMdSc.js";import{R as H}from"./EditOutlined-ILeNmOcc.js";import{T as x}from"./index-QOKA2q-x.js";import{R as B}from"./EyeOutlined-C2nNK8zw.js";import{S as b}from"./index-HUJMorX5.js";import{S as L}from"./index-BTEsCnpq.js";import{T as _}from"./index-CrLFCoSO.js";import{B as y}from"./index-BHxSUtD9.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new a.Error().stack;o&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[o]="94c5ab51-4ee5-4496-acd4-6e6a3d271db6",a._sentryDebugIdIdentifier="sentry-dbid-94c5ab51-4ee5-4496-acd4-6e6a3d271db6")}catch{}const q=[{label:"Communication & Announcements",value:"Communication & Announcements"},{label:"Notifications & Reminders",value:"Notifications & Reminders"},{label:"System & Security Alerts",value:"System & Security Alerts"}],z={"Communication & Announcements":[{label:"Registration Completed",value:"Registration Completed"},{label:"Event Created",value:"Event Created"}],"Notifications & Reminders":[{label:"Project Status",value:"Project Status"},{label:"Meeting Scheduled (X hours before start)",value:"Meeting Scheduled (X hours before start)"},{label:"Due Date Approaching",value:"Due Date Approaching"},{label:"Significant Decline Curve",value:"Significant Decline Curve"}],"System & Security Alerts":[{label:"Scheduled System Maintenance",value:"Scheduled System Maintenance"},{label:"Login from New Device",value:"Login from New Device"}]},{TextArea:V}=f,re=({formProps:a,error:o,loading:u,isEdit:v})=>{const[i]=n.useForm(),j=P(),[l,S]=m.useState(""),[C,w]=m.useState("edit"),[c,T]=m.useState("");F(o,({key:t,message:r})=>i.setFields([{name:t,errors:[r]}])),M.data.items.map(t=>({label:t.nama_perusahaan,value:t.nama_perusahaan}));const N=t=>{T(t),i.setFieldsValue({trigger:void 0})},k=t=>{const r=t.target.value;S(r),i.setFieldsValue({body:r})},D=t=>{if(!t)return'<p style="color: #999;">No content available</p>';const r={"[Name]":"John Doe","[Date]":new Date().toLocaleDateString(),"[Project Name]":"Sample Project","[Status]":"Active","[Contact]":"contact@example.com"};let d=t;return Object.keys(r).forEach(g=>{const R=new RegExp(g.replace(/\[|\]/g,"\\$&"),"g");d=d.replace(R,r[g])}),d},I=[{key:"edit",label:e.jsxs("span",{children:[e.jsx(H,{}),"Edit Content"]}),children:e.jsx(V,{value:l,onChange:k,rows:12,placeholder:`Enter message body content (HTML supported)

Available placeholders:
- [Name] - Recipient name
- [Date] - Current date
- [Project Name] - Project name
- [Status] - Status value
- [Contact] - Contact information

Example:
<h2>Message Title</h2>
<p>Hello <strong>[Name]</strong>,</p>
<p>Your message content here...</p>`,style:{fontFamily:"monospace"}})},{key:"preview",label:e.jsxs("span",{children:[e.jsx(B,{}),"HTML Preview"]}),children:e.jsxs("div",{style:{border:"1px solid #d9d9d9",borderRadius:"6px",padding:"16px",backgroundColor:"#fafafa",minHeight:"300px"},children:[e.jsx(x.Text,{type:"secondary",style:{fontSize:"12px",display:"block",marginBottom:"8px"},children:"HTML Preview (with sample placeholder values):"}),e.jsx("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"4px",border:"1px solid #e8e8e8",minHeight:"150px"},dangerouslySetInnerHTML:{__html:D(l)}}),e.jsx(x.Text,{type:"secondary",style:{fontSize:"12px",display:"block",marginTop:"16px",marginBottom:"8px"},children:"Raw HTML Code:"}),e.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"150px",overflow:"auto",border:"1px solid #e8e8e8"},children:l||"No content available"})]})}];return e.jsxs(n,{...a,form:i,layout:"vertical",children:[e.jsx(p,{children:e.jsxs(A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(p,{title:"Template Information",children:e.jsxs(h,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(n.Item,{label:"Nama Template",name:"nama_template",rules:[{required:!0,message:"Nama Template is required"},{min:1,message:"Nama Template must be at least 1 character"}],children:e.jsx(f,{placeholder:"Enter template name"})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{label:"Category",name:"category",rules:[{required:!0,message:"Category is required"}],children:e.jsx(b,{placeholder:"Select category",onChange:N,options:q})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{label:"Trigger",name:"trigger",rules:[{required:!0,message:"Trigger is required"}],children:e.jsx(b,{placeholder:"Select trigger",disabled:!c,options:c?z[c]:[]})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{label:"Status",name:"status",valuePropName:"checked",getValueFromEvent:t=>t?"Active":"Inactive",getValueProps:t=>({checked:t==="Active"}),children:e.jsx(L,{checkedChildren:"Active",unCheckedChildren:"Inactive",defaultChecked:!0})})})]})}),e.jsx(p,{title:"Message Content",children:e.jsx(h,{gutter:16,children:e.jsxs(s,{span:24,children:[e.jsx(n.Item,{label:"Body",name:"body",rules:[{required:!0,message:"Body is required"},{min:10,message:"Body must be at least 10 characters"}],children:e.jsx(_,{activeKey:C,onChange:w,items:I,size:"small"})}),e.jsxs("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:[e.jsx("strong",{children:"Note:"})," This field supports HTML formatting. Use placeholders like [Name], [Date], [Project Name] for dynamic content.",e.jsx("br",{}),e.jsx("strong",{children:"Preview:"}),' Switch to the "HTML Preview" tab to see how your content will look when rendered.',e.jsx("br",{}),e.jsx("strong",{children:"Future Enhancement:"})," This will be replaced with a TinyMCE WYSIWYG editor for better content editing experience."]})]})})})]})}),e.jsxs(E,{justify:"flex-end",gap:16,style:{marginTop:24},children:[e.jsx(y,{type:"text",disabled:u,onClick:()=>j("/master-data/template-messaging"),children:"Cancel"}),e.jsx(y,{type:"primary",htmlType:"submit",loading:u,children:v?"Save Changes":"Submit"})]})]})};export{re as F};
//# sourceMappingURL=Form-BYf-rGXA.js.map
