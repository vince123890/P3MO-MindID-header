{"version":3,"file":"page-S9cwwmkC.js","sources":["../../src/app/(protected)/projects/[id]/activities/create/page.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { Page } from \"admiral\";\nimport { Modal, message, Form } from \"antd\";\n\nimport { ActivityForm } from \"@/app/(protected)/projects/_components/activity-form.jsx\";\nimport { projectActivities } from \"@/app/(protected)/projects/_data/activities.js\";\n\nexport const Component = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n\n  const breadcrumbs = [\n    {\n      label: \"Projects\",\n      path: \"/projects\",\n    },\n    {\n      label: \"Project Detail\",\n      path: `/projects/${id}`,\n    },\n    {\n      label: \"Current Activities\",\n      path: `/projects/${id}/activities`,\n    },\n    {\n      label: \"Create Activity\",\n      path: `/projects/${id}/activities/create`,\n    },\n  ];\n\n  const handleFinish = (values) => {\n    setLoading(true);\n    \n    // Simulate API call\n    setTimeout(() => {\n      try {\n        // Generate new activity ID\n        const newId = String(Math.max(...projectActivities.data.items.map(item => parseInt(item.id)), 0) + 1);\n        \n        // Generate task ID - get the highest number for this project and increment\n        const projectActivitiesFiltered = projectActivities.data.items\n          .filter(item => item.project_id === id)\n          .map(item => {\n            const match = item.task_id.match(/TASK-(\\d+)/);\n            return match ? parseInt(match[1]) : 0;\n          });\n        \n        const lastTaskNumber = projectActivitiesFiltered.length > 0 ? Math.max(...projectActivitiesFiltered) : 0;\n        const taskNumber = `TASK-${String(lastTaskNumber + 1).padStart(3, '0')}`;\n        \n        // Create new activity object\n        const newActivity = {\n          id: newId,\n          project_id: id,\n          task_id: taskNumber,\n          ...values,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        };\n        \n        // Add to activities array (in real app, this would be an API call)\n        projectActivities.data.items.push(newActivity);\n        \n        message.success(\"Activity created successfully\");\n        navigate(`/projects/${id}`);\n      } catch (error) {\n        message.error(\"Failed to create activity\");\n      } finally {\n        setLoading(false);\n      }\n    }, 1000);\n  };\n\n  return (\n    <Page\n      title=\"Create Activity\"\n      breadcrumbs={breadcrumbs}\n    >\n      <Modal\n        title=\"Create New Activity\"\n        open={true}\n        onCancel={() => navigate(-1)}\n        footer={null}\n        width={1200}\n        centered\n        styles={{\n          body: {\n            maxHeight: '80vh',\n            overflowY: 'auto'\n          }\n        }}\n      >\n        <ActivityForm\n          formProps={{\n            form,\n            onFinish: handleFinish,\n          }}\n          loading={loading}\n          onSubmit={handleFinish}\n        />\n      </Modal>\n    </Page>\n  );\n};\n\nexport default Component;\n"],"names":["Component","id","useParams","navigate","useNavigate","form","Form","loading","setLoading","useState","breadcrumbs","handleFinish","values","newId","projectActivities","item","projectActivitiesFiltered","match","lastTaskNumber","taskNumber","newActivity","message","jsx","Page","Modal","ActivityForm"],"mappings":"6yCAQO,MAAMA,EAAY,IAAM,CAC7B,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACTC,EAAWC,EAAA,EACX,CAACC,CAAI,EAAIC,EAAK,QAAA,EACd,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EAEtCC,EAAc,CAClB,CACE,MAAO,WACP,KAAM,WAAA,EAER,CACE,MAAO,iBACP,KAAM,aAAaT,CAAE,EAAA,EAEvB,CACE,MAAO,qBACP,KAAM,aAAaA,CAAE,aAAA,EAEvB,CACE,MAAO,kBACP,KAAM,aAAaA,CAAE,oBAAA,CACvB,EAGIU,EAAgBC,GAAW,CAC/BJ,EAAW,EAAI,EAGf,WAAW,IAAM,CACf,GAAI,CAEF,MAAMK,EAAQ,OAAO,KAAK,IAAI,GAAGC,EAAkB,KAAK,MAAM,IAAIC,GAAQ,SAASA,EAAK,EAAE,CAAC,EAAG,CAAC,EAAI,CAAC,EAG9FC,EAA4BF,EAAkB,KAAK,MACtD,OAAOC,GAAQA,EAAK,aAAed,CAAE,EACrC,IAAIc,GAAQ,CACX,MAAME,EAAQF,EAAK,QAAQ,MAAM,YAAY,EAC7C,OAAOE,EAAQ,SAASA,EAAM,CAAC,CAAC,EAAI,CACtC,CAAC,EAEGC,EAAiBF,EAA0B,OAAS,EAAI,KAAK,IAAI,GAAGA,CAAyB,EAAI,EACjGG,EAAa,QAAQ,OAAOD,EAAiB,CAAC,EAAE,SAAS,EAAG,GAAG,CAAC,GAGhEE,EAAc,CAClB,GAAIP,EACJ,WAAYZ,EACZ,QAASkB,EACT,GAAGP,EACH,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,EAIrCE,EAAkB,KAAK,MAAM,KAAKM,CAAW,EAE7CC,EAAQ,QAAQ,+BAA+B,EAC/ClB,EAAS,aAAaF,CAAE,EAAE,CAC5B,MAAgB,CACdoB,EAAQ,MAAM,2BAA2B,CAC3C,QAAA,CACEb,EAAW,EAAK,CAClB,CACF,EAAG,GAAI,CACT,EAEA,OACEc,EAAAA,IAACC,EAAA,CACC,MAAM,kBACN,YAAAb,EAEA,SAAAY,EAAAA,IAACE,EAAA,CACC,MAAM,sBACN,KAAM,GACN,SAAU,IAAMrB,EAAS,EAAE,EAC3B,OAAQ,KACR,MAAO,KACP,SAAQ,GACR,OAAQ,CACN,KAAM,CACJ,UAAW,OACX,UAAW,MAAA,CACb,EAGF,SAAAmB,EAAAA,IAACG,EAAA,CACC,UAAW,CACT,KAAApB,EACA,SAAUM,CAAA,EAEZ,QAAAJ,EACA,SAAUI,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAGN"}