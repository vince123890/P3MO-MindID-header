{"version":3,"file":"page-BrIkaQWK.js","sources":["../../src/app/(protected)/projects/page.jsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { Tag } from \"antd\";\nimport dayjs from \"dayjs\";\nimport { Link } from \"react-router\";\nimport { Page, DataTable } from \"admiral\";\n\nimport { makeSource } from \"@/utils/data-table\";\nimport { useFilter } from \"@/app/_hooks/datatable/use-filter\";\nimport { useGetData } from \"@/app/_hooks/use-get-data\";\nimport { allProjects } from \"./_data\";\n\nexport const Component = () => {\n  const { handleChange, filters } = useFilter();\n\n  const allProjectsData = useGetData(allProjects);\n\n  // Generate search suggestions from project data\n  const searchOptions = useMemo(() => {\n    if (!filters.search || filters.search.length < 1 || !allProjectsData.data?.data?.items) {\n      return [];\n    }\n\n    const items = allProjectsData.data.data.items;\n    const suggestions = [];\n\n    items.forEach((project) => {\n      // Match project code\n      if (project.project_code?.toLowerCase().includes(filters.search.toLowerCase())) {\n        suggestions.push({\n          value: project.project_code,\n          label: (\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <span><strong>Code:</strong> {project.project_code}</span>\n              <span style={{ color: \"#999\", fontSize: \"12px\" }}>{project.company}</span>\n            </div>\n          ),\n        });\n      }\n\n      // Match business initiative name\n      if (project.business_initiative_name?.toLowerCase().includes(filters.search.toLowerCase())) {\n        suggestions.push({\n          value: project.business_initiative_name,\n          label: (\n            <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n              <span><strong>Initiative:</strong> {project.business_initiative_name}</span>\n              <span style={{ color: \"#999\", fontSize: \"12px\" }}>{project.project_code}</span>\n            </div>\n          ),\n        });\n      }\n    });\n\n    // Remove duplicates and limit to 10 suggestions\n    return suggestions.slice(0, 10);\n  }, [filters.search, allProjectsData.data]);\n\n  // Status tag colors\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"Active\":\n        return \"green\";\n      case \"Pending\":\n        return \"orange\";\n      case \"Completed\":\n        return \"blue\";\n      case \"Cancelled\":\n        return \"red\";\n      default:\n        return \"default\";\n    }\n  };\n\n  // Project List Columns\n  const projectColumns = [\n    {\n      dataIndex: \"project_code\",\n      key: \"project_code\",\n      title: \"Project Code\",\n      sorter: true,\n      render: (_, record) => (\n        <Link to={`/projects/${record.id}`}>\n          <u>{record.project_code}</u>\n        </Link>\n      ),\n    },\n    {\n      dataIndex: \"business_initiative_name\",\n      title: \"Project Name\",\n      key: \"business_initiative_name\",\n      sorter: true,\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      dataIndex: \"company\",\n      title: \"Company\",\n      key: \"company\",\n      sorter: true,\n    },\n    {\n      dataIndex: \"status_indicator\",\n      title: \"Status Indicator\",\n      key: \"status_indicator\",\n      sorter: true,\n      render: (status_indicator) => {\n        const color = status_indicator === \"On Track\" ? \"green\" : \n                     status_indicator === \"At Risk\" ? \"orange\" : \n                     status_indicator === \"Off Track\" ? \"red\" : \"default\";\n        return (\n          <Tag color={color} bordered={false}>\n            {status_indicator || \"Unknown\"}\n          </Tag>\n        );\n      },\n    },\n    {\n      dataIndex: \"status\",\n      title: \"Workflow Status\",\n      key: \"status\",\n      sorter: true,\n      render: (status) => (\n        <Tag color={getStatusColor(status)} bordered={false}>\n          {status}\n        </Tag>\n      ),\n    },\n    {\n      dataIndex: \"days_remaining_till_cod\",\n      title: \"Days Remaining till COD\",\n      key: \"days_remaining_till_cod\",\n      sorter: true,\n      render: (days) => {\n        if (days === null || days === undefined) return \"-\";\n        const color = days > 90 ? \"green\" : days > 30 ? \"orange\" : \"red\";\n        return (\n          <Tag color={color} bordered={false}>\n            {days} days\n          </Tag>\n        );\n      },\n    },\n  ];\n\n\n  const breadcrumbs = [\n    {\n      label: \"PIMS\",\n      path: \"/projects\",\n    },\n  ];\n\n  return (\n    <Page\n      title=\"PIMS\"\n      breadcrumbs={breadcrumbs}\n      noStyle\n    >\n      <DataTable\n        onChange={handleChange}\n        rowKey=\"id\"\n        loading={allProjectsData.loading}\n        source={makeSource(allProjectsData.data)}\n        columns={projectColumns}\n        showRowSelection={false}\n        search={filters.search}\n        searchOptions={searchOptions}\n        filterComponents={[\n          {\n            label: \"Status\",\n            name: \"status\",\n            type: \"Select\",\n            placeholder: \"Select Status\",\n            width: 140,\n            defaultValue: filters.status,\n            options: [\n              { label: \"Active\", value: \"Active\" },\n              { label: \"Pending\", value: \"Pending\" },\n              { label: \"Completed\", value: \"Completed\" },\n              { label: \"Cancelled\", value: \"Cancelled\" },\n            ],\n          },\n        ]}\n      />\n    </Page>\n  );\n};\n\nexport default Component;\n"],"names":["Component","handleChange","filters","useFilter","allProjectsData","useGetData","allProjects","searchOptions","useMemo","_b","_a","items","suggestions","project","jsxs","jsx","getStatusColor","status","projectColumns","_","record","Link","status_indicator","color","Tag","days","breadcrumbs","Page","DataTable","makeSource"],"mappings":"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"}