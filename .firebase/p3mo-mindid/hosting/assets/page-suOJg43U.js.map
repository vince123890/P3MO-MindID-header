{"version":3,"file":"page-suOJg43U.js","sources":["../../src/app/(protected)/projects/[id]/update/page.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { message } from \"antd\";\nimport { Page } from \"admiral\";\nimport dayjs from \"dayjs\";\n\nimport { FormProject } from \"../../_components/form.jsx\";\nimport { projectDetail } from \"../../_data/index.js\";\n\nexport const Component = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [projectData, setProjectData] = useState(null);\n  const [initialLoading, setInitialLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchProject = async () => {\n      try {\n        setInitialLoading(true);\n        // Simulate API call\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        \n        const response = projectDetail(id);\n        if (response.data) {\n          const project = response.data;\n          // Format data for form\n          const formattedProject = {\n            ...project,\n            last_sync_date: project.last_sync_date ? dayjs(project.last_sync_date) : null,\n          };\n          setProjectData(formattedProject);\n        } else {\n          message.error(\"Project not found\");\n          navigate(\"/projects\");\n        }\n      } catch (err) {\n        setError(err);\n        message.error(\"Failed to fetch project data\");\n        navigate(\"/projects\");\n      } finally {\n        setInitialLoading(false);\n      }\n    };\n\n    fetchProject();\n  }, [id, navigate]);\n\n  const handleSubmit = async (values) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Simulate API call\n      await new Promise((resolve) => setTimeout(resolve, 1500));\n\n      // Format the data\n      const updatedProject = {\n        ...values,\n        last_sync_date: values.last_sync_date ? values.last_sync_date.toISOString() : null,\n        updated_at: dayjs().toISOString(),\n        dokumen_pendukung: values.dokumen_pendukung || [],\n      };\n\n      // Simulate successful update\n      console.log(\"Project updated:\", updatedProject);\n      message.success(\"Project updated successfully\");\n\n      // Navigate back to project detail\n      navigate(`/projects/${id}`);\n    } catch (err) {\n      setError(err);\n      message.error(\"Failed to update project\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const breadcrumbs = [\n    {\n      label: \"Projects\",\n      path: \"/projects\",\n    },\n    {\n      label: \"Edit Project\",\n      path: `/projects/${id}/update`,\n    },\n  ];\n\n  if (initialLoading) {\n    return (\n      <Page\n        title=\"Edit Project\"\n        breadcrumbs={breadcrumbs}\n        loading={true}\n      />\n    );\n  }\n\n  const formProps = {\n    onFinish: handleSubmit,\n    initialValues: projectData,\n  };\n\n  return (\n    <Page\n      title=\"Edit Project\"\n      breadcrumbs={breadcrumbs}\n      loading={loading}\n    >\n      <FormProject\n        formProps={formProps}\n        error={error}\n        loading={loading}\n        isEdit={true}\n      />\n    </Page>\n  );\n};\n\nexport default Component;\n"],"names":["Component","id","useParams","navigate","useNavigate","loading","setLoading","useState","error","setError","projectData","setProjectData","initialLoading","setInitialLoading","useEffect","resolve","response","projectDetail","project","formattedProject","dayjs","message","err","handleSubmit","values","updatedProject","breadcrumbs","jsx","Page","formProps","FormProject"],"mappings":"q3CASO,MAAMA,GAAY,IAAM,CAC7B,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACTC,EAAWC,EAAA,EACX,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,IAAI,EACjC,CAACG,EAAaC,CAAc,EAAIJ,EAAAA,SAAS,IAAI,EAC7C,CAACK,EAAgBC,CAAiB,EAAIN,EAAAA,SAAS,EAAI,EAEzDO,EAAAA,UAAU,IAAM,EACO,SAAY,CAC/B,GAAI,CACFD,EAAkB,EAAI,EAEtB,MAAM,IAAI,QAASE,GAAY,WAAWA,EAAS,GAAI,CAAC,EAExD,MAAMC,EAAWC,EAAchB,CAAE,EACjC,GAAIe,EAAS,KAAM,CACjB,MAAME,EAAUF,EAAS,KAEnBG,EAAmB,CACvB,GAAGD,EACH,eAAgBA,EAAQ,eAAiBE,EAAMF,EAAQ,cAAc,EAAI,IAAA,EAE3EP,EAAeQ,CAAgB,CACjC,MACEE,EAAQ,MAAM,mBAAmB,EACjClB,EAAS,WAAW,CAExB,OAASmB,EAAK,CACZb,EAASa,CAAG,EACZD,EAAQ,MAAM,8BAA8B,EAC5ClB,EAAS,WAAW,CACtB,QAAA,CACEU,EAAkB,EAAK,CACzB,CACF,GAEA,CACF,EAAG,CAACZ,EAAIE,CAAQ,CAAC,EAEjB,MAAMoB,EAAe,MAAOC,GAAW,CACrClB,EAAW,EAAI,EACfG,EAAS,IAAI,EAEb,GAAI,CAEF,MAAM,IAAI,QAASM,GAAY,WAAWA,EAAS,IAAI,CAAC,EAGxD,MAAMU,EAAiB,CACrB,GAAGD,EACH,eAAgBA,EAAO,eAAiBA,EAAO,eAAe,cAAgB,KAC9E,WAAYJ,EAAA,EAAQ,YAAA,EACpB,kBAAmBI,EAAO,mBAAqB,CAAA,CAAC,EAIlD,QAAQ,IAAI,mBAAoBC,CAAc,EAC9CJ,EAAQ,QAAQ,8BAA8B,EAG9ClB,EAAS,aAAaF,CAAE,EAAE,CAC5B,OAASqB,EAAK,CACZb,EAASa,CAAG,EACZD,EAAQ,MAAM,0BAA0B,CAC1C,QAAA,CACEf,EAAW,EAAK,CAClB,CACF,EAEMoB,EAAc,CAClB,CACE,MAAO,WACP,KAAM,WAAA,EAER,CACE,MAAO,eACP,KAAM,aAAazB,CAAE,SAAA,CACvB,EAGF,GAAIW,EACF,OACEe,EAAAA,IAACC,EAAA,CACC,MAAM,eACN,YAAAF,EACA,QAAS,EAAA,CAAA,EAKf,MAAMG,EAAY,CAChB,SAAUN,EACV,cAAeb,CAAA,EAGjB,OACEiB,EAAAA,IAACC,EAAA,CACC,MAAM,eACN,YAAAF,EACA,QAAArB,EAEA,SAAAsB,EAAAA,IAACG,EAAA,CACC,UAAAD,EACA,MAAArB,EACA,QAAAH,EACA,OAAQ,EAAA,CAAA,CACV,CAAA,CAGN"}