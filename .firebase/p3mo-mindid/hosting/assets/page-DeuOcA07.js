import{f as k,u as j,a as y,j as o}from"./@react-router-BOJM2k20.js";import{P as R}from"./index-BafWvN44.js";import{R as w}from"./risk-form-VQW55dr5.js";import{p as s}from"./risks-BS2_D_ps.js";import{F as S}from"./index-DDk6ch2l.js";import{M as x}from"./index-C_i7UN8L.js";import{s as c}from"./index-Cskjed0c.js";import"./index-QOKA2q-x.js";import"./reactNode-Csz1gYGy.js";import"./index-BHxSUtD9.js";import"./index-BGD_4JXV.js";import"./Skeleton-BKwTcTmI.js";import"./index-CrLFCoSO.js";import"./PlusOutlined-DDuQXVnN.js";import"./use-form-error-handling-Dj-OCOIU.js";import"./index-BpdQMdSc.js";import"./Input-CgaMpdgX.js";import"./index-HUJMorX5.js";import"./PlusOutlined-Dx_yv4bP.js";import"./AntdIcon-DUdM8fG5.js";import"./DeleteOutlined-DO7ccZ5J.js";import"./useForm-CJYsS5GE.js";import"./ExclamationCircleFilled-C_fPh9YD.js";import"./InfoCircleFilled-D4ctpFmw.js";import"./index-DPug0LmA.js";import"./useClosable-q7p4GCca.js";import"./extendsObject-CT8lAb9A.js";import"./context-BclqCKk2.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="5c41ffeb-cf5f-4cd0-9f04-404e5a041c2d",t._sentryDebugIdIdentifier="sentry-dbid-5c41ffeb-cf5f-4cd0-9f04-404e5a041c2d")}catch{}const Z=()=>{const{id:t}=k(),e=j(),[d]=S.useForm(),[l,i]=y.useState(!1),f=[{label:"Projects",path:"/projects"},{label:"Project Detail",path:`/projects/${t}`},{label:"Risks",path:`/projects/${t}/risks`},{label:"Create Risk",path:`/projects/${t}/risks/create`}],a=u=>{i(!0),setTimeout(()=>{try{const n=String(Math.max(...s.data.items.map(r=>parseInt(r.id)),0)+1),m=s.data.items.filter(r=>r.project_id===t).map(r=>{const p=r.nomor_resiko.match(/RSK-(\d+)/);return p?parseInt(p[1]):0}),b=m.length>0?Math.max(...m):0,h=`RSK-${String(b+1).padStart(3,"0")}`,g={id:n,project_id:t,nomor_resiko:h,...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};s.data.items.push(g),c.success("Risk created successfully"),e(`/projects/${t}?tab=risks`)}catch{c.error("Failed to create risk")}finally{i(!1)}},1e3)};return o.jsx(R,{title:"Create Risk",breadcrumbs:f,children:o.jsx(x,{title:"Create New Risk",open:!0,onCancel:()=>e(`/projects/${t}?tab=risks`),footer:null,width:1200,centered:!0,styles:{body:{maxHeight:"80vh",overflowY:"auto"}},children:o.jsx(w,{formProps:{form:d,onFinish:a},loading:l,onSubmit:a})})})};export{Z as Component,Z as default};
//# sourceMappingURL=page-DeuOcA07.js.map
