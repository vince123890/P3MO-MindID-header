{"version":3,"file":"page-pkvkY0TS.js","sources":["../../src/app/(protected)/projects/[id]/activities/[activityId]/update/page.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { Page } from \"admiral\";\nimport { Modal, message, Form } from \"antd\";\n\nimport { ActivityForm } from \"@/app/(protected)/projects/_components/activity-form.jsx\";\nimport { getActivityById, projectActivities } from \"@/app/(protected)/projects/_data/activities.js\";\n\nexport const Component = () => {\n  const { id, activityId } = useParams();\n  const navigate = useNavigate();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [activityData, setActivityData] = useState(null);\n\n  useEffect(() => {\n    const fetchActivityData = async () => {\n      setLoading(true);\n      try {\n        const response = await getActivityById(activityId);\n        if (response.data) {\n          setActivityData(response.data);\n        } else {\n          message.error(\"Activity not found\");\n          navigate(`/projects/${id}`);\n        }\n      } catch (error) {\n        message.error(\"Failed to fetch activity data\");\n        navigate(`/projects/${id}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchActivityData();\n  }, [activityId, id, navigate]);\n\n  const breadcrumbs = [\n    {\n      label: \"Projects\",\n      path: \"/projects\",\n    },\n    {\n      label: \"Project Detail\",\n      path: `/projects/${id}`,\n    },\n    {\n      label: \"Current Activities\",\n      path: `/projects/${id}/activities`,\n    },\n    {\n      label: `Edit Activity ${activityData?.task_id || activityId}`,\n      path: `/projects/${id}/activities/${activityId}/update`,\n    },\n  ];\n\n  const handleFinish = (values) => {\n    setLoading(true);\n    \n    // Simulate API call\n    setTimeout(() => {\n      try {\n        // Find the activity index in the array\n        const activityIndex = projectActivities.data.items.findIndex(item => item.id === activityId);\n        \n        if (activityIndex !== -1) {\n          // Update the activity data\n          projectActivities.data.items[activityIndex] = {\n            ...projectActivities.data.items[activityIndex],\n            ...values,\n            updated_at: new Date().toISOString(),\n          };\n          \n          message.success(\"Activity updated successfully\");\n          navigate(`/projects/${id}`);\n        } else {\n          message.error(\"Activity not found\");\n        }\n      } catch (error) {\n        message.error(\"Failed to update activity\");\n      } finally {\n        setLoading(false);\n      }\n    }, 1000);\n  };\n\n  return (\n    <Page\n      title={`Edit Activity - ${activityData?.task_id || 'Loading...'}`}\n      breadcrumbs={breadcrumbs}\n      loading={loading}\n    >\n      <Modal\n        title={`Edit Activity - ${activityData?.task_id || 'Loading...'}`}\n        open={true}\n        onCancel={() => navigate(-1)}\n        footer={null}\n        width={1200}\n        centered\n        styles={{\n          body: {\n            maxHeight: '80vh',\n            overflowY: 'auto'\n          }\n        }}\n      >\n        <ActivityForm\n          formProps={{\n            form,\n            onFinish: handleFinish,\n          }}\n          initialData={activityData}\n          loading={loading}\n          isEdit={true}\n          onSubmit={handleFinish}\n        />\n      </Modal>\n    </Page>\n  );\n};\n\nexport default Component;\n"],"names":["Component","id","activityId","useParams","navigate","useNavigate","form","Form","loading","setLoading","useState","activityData","setActivityData","useEffect","response","getActivityById","message","breadcrumbs","handleFinish","values","activityIndex","projectActivities","item","jsx","Page","Modal","ActivityForm"],"mappings":"ozCAQO,MAAMA,EAAY,IAAM,CAC7B,KAAM,CAAE,GAAAC,EAAI,WAAAC,CAAA,EAAeC,EAAA,EACrBC,EAAWC,EAAA,EACX,CAACC,CAAI,EAAIC,EAAK,QAAA,EACd,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAS,IAAI,EAErDG,EAAAA,UAAU,IAAM,EACY,SAAY,CACpCJ,EAAW,EAAI,EACf,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAgBb,CAAU,EAC7CY,EAAS,KACXF,EAAgBE,EAAS,IAAI,GAE7BE,EAAQ,MAAM,oBAAoB,EAClCZ,EAAS,aAAaH,CAAE,EAAE,EAE9B,MAAgB,CACde,EAAQ,MAAM,+BAA+B,EAC7CZ,EAAS,aAAaH,CAAE,EAAE,CAC5B,QAAA,CACEQ,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAACP,EAAYD,EAAIG,CAAQ,CAAC,EAE7B,MAAMa,EAAc,CAClB,CACE,MAAO,WACP,KAAM,WAAA,EAER,CACE,MAAO,iBACP,KAAM,aAAahB,CAAE,EAAA,EAEvB,CACE,MAAO,qBACP,KAAM,aAAaA,CAAE,aAAA,EAEvB,CACE,MAAO,kBAAiBU,GAAA,YAAAA,EAAc,UAAWT,CAAU,GAC3D,KAAM,aAAaD,CAAE,eAAeC,CAAU,SAAA,CAChD,EAGIgB,EAAgBC,GAAW,CAC/BV,EAAW,EAAI,EAGf,WAAW,IAAM,CACf,GAAI,CAEF,MAAMW,EAAgBC,EAAkB,KAAK,MAAM,UAAUC,GAAQA,EAAK,KAAOpB,CAAU,EAEvFkB,IAAkB,IAEpBC,EAAkB,KAAK,MAAMD,CAAa,EAAI,CAC5C,GAAGC,EAAkB,KAAK,MAAMD,CAAa,EAC7C,GAAGD,EACH,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,EAGrCH,EAAQ,QAAQ,+BAA+B,EAC/CZ,EAAS,aAAaH,CAAE,EAAE,GAE1Be,EAAQ,MAAM,oBAAoB,CAEtC,MAAgB,CACdA,EAAQ,MAAM,2BAA2B,CAC3C,QAAA,CACEP,EAAW,EAAK,CAClB,CACF,EAAG,GAAI,CACT,EAEA,OACEc,EAAAA,IAACC,EAAA,CACC,MAAO,oBAAmBb,GAAA,YAAAA,EAAc,UAAW,YAAY,GAC/D,YAAAM,EACA,QAAAT,EAEA,SAAAe,EAAAA,IAACE,EAAA,CACC,MAAO,oBAAmBd,GAAA,YAAAA,EAAc,UAAW,YAAY,GAC/D,KAAM,GACN,SAAU,IAAMP,EAAS,EAAE,EAC3B,OAAQ,KACR,MAAO,KACP,SAAQ,GACR,OAAQ,CACN,KAAM,CACJ,UAAW,OACX,UAAW,MAAA,CACb,EAGF,SAAAmB,EAAAA,IAACG,EAAA,CACC,UAAW,CACT,KAAApB,EACA,SAAUY,CAAA,EAEZ,YAAaP,EACb,QAAAH,EACA,OAAQ,GACR,SAAUU,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAGN"}