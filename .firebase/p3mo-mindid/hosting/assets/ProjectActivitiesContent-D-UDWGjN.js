import{a as C,j as e}from"./@react-router-BOJM2k20.js";import{S as f,F as p,D as x}from"./index-BafWvN44.js";import{S as o}from"./index-BGD_4JXV.js";import{D as H,m as R}from"./data-table-Dk-TAeJX.js";import{A as T}from"./activity-form-BWo2H9Zf.js";import{p as d,g as D}from"./activities-DGHV3UKN.js";import{f as b}from"./date-format-C-noHyYW.js";import{B as s}from"./index-BHxSUtD9.js";import{R as k}from"./ArrowLeftOutlined-C3pXU1wT.js";import{T as O}from"./index-QOKA2q-x.js";import{T as c}from"./index-Y5xvexJH.js";import{R as Y}from"./PlusOutlined-Dx_yv4bP.js";import{M as $}from"./index-C_i7UN8L.js";import{s as S}from"./index-Cskjed0c.js";import{R as K}from"./EditOutlined-ILeNmOcc.js";import{R as V}from"./DeleteOutlined-DO7ccZ5J.js";import"./reactNode-Csz1gYGy.js";import"./Skeleton-BKwTcTmI.js";import"./index-CrLFCoSO.js";import"./PlusOutlined-DDuQXVnN.js";import"./index-Dh480BEi.js";import"./index-DlR_Bwt3.js";import"./index-DDk6ch2l.js";import"./useForm-CJYsS5GE.js";import"./ExclamationCircleFilled-C_fPh9YD.js";import"./index-HUJMorX5.js";import"./FilterOutlined-iieb3jrr.js";import"./context-BclqCKk2.js";import"./useClosable-q7p4GCca.js";import"./extendsObject-CT8lAb9A.js";import"./index-BpdQMdSc.js";import"./Input-CgaMpdgX.js";import"./Table-D1c8ugbT.js";import"./index-D7Vx8KJw.js";import"./use-form-error-handling-Dj-OCOIU.js";import"./UploadOutlined-ymldMT98.js";import"./AntdIcon-DUdM8fG5.js";import"./InfoCircleFilled-D4ctpFmw.js";import"./index-DPug0LmA.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},y=new r.Error().stack;y&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[y]="31f95813-c8f7-47ff-9479-0f355010b240",r._sentryDebugIdIdentifier="sentry-dbid-31f95813-c8f7-47ff-9479-0f355010b240")}catch{}const{Text:n}=O,De=({id:r,activitiesData:y,activitiesLoading:N,filters:m,readOnly:j=!1})=>{const[g,u]=C.useState("list"),[t,v]=C.useState(null),B=()=>{try{return m?typeof m.search=="string"?m.search:m.search&&typeof m.search.toString=="function"?m.search.toString():"":""}catch(a){return console.warn("Error extracting search value:",a),""}},z=[{dataIndex:"task_id",key:"task_id",title:"Task ID",sorter:!0,width:150,fixed:"left",render:(a,i)=>e.jsx(s,{type:"link",onClick:()=>{const l=D(i.id);v(l.data),u("detail")},style:{color:"#0F1E3A",textDecoration:"underline",textDecorationColor:"#0F1E3A",padding:0,height:"auto",textAlign:"left"},children:a})},{dataIndex:"fase",key:"fase",title:"Fase",sorter:!0,width:140,fixed:"left",render:a=>{const i={Perencanaan:"blue",Pengembangan:"green","In HPO":"orange",FID:"purple"};return e.jsx(c,{color:i[a]||"default",children:a})}},{dataIndex:"aktivitas_bulan_sebelumnya",key:"aktivitas_bulan_sebelumnya",title:"Aktivitas Bulan Berjalan",sorter:!0,ellipsis:!0,width:300,className:"aktivitas-bulan-berjalan-header",onHeaderCell:()=>({className:"aktivitas-bulan-berjalan-header"})},{dataIndex:"status_bulan_sebelumnya",key:"status_bulan_sebelumnya",title:"Status Berjalan",sorter:!0,width:140,className:"status-berjalan-header",onHeaderCell:()=>({className:"status-berjalan-header"}),render:a=>{const i={"Not Started":"default","In Progress":"blue",Completed:"green","On Hold":"orange",Cancelled:"red"};return e.jsx(c,{color:i[a]||"default",children:a})}},{dataIndex:"aktivitas_bulan_berjalan",key:"aktivitas_bulan_berjalan",title:"Aktivitas Bulan Selanjutnya",sorter:!0,ellipsis:!0,width:300,className:"aktivitas-bulan-selanjutnya-header",onHeaderCell:()=>({className:"aktivitas-bulan-selanjutnya-header"})},{dataIndex:"status_bulan_berjalan",key:"status_bulan_berjalan",title:"Status Selanjutnya",sorter:!0,width:140,className:"status-selanjutnya-header",onHeaderCell:()=>({className:"status-selanjutnya-header"}),render:a=>{const i={"Not Started":"default","In Progress":"blue",Completed:"green","On Hold":"orange",Cancelled:"red"};return e.jsx(c,{color:i[a]||"default",children:a})}},{dataIndex:"critical_task",key:"critical_task",title:"Critical Task",sorter:!0,width:120,render:a=>{const i=a==="Yes"||a===!0;return e.jsx(c,{color:i?"green":"red",children:i?"Yes":"No"})}},...j?[]:[{dataIndex:"Action",title:"Action",key:"Action",width:120,fixed:"right",render:(a,i)=>e.jsxs(p,{children:[e.jsx(s,{type:"link",icon:e.jsx(K,{}),size:"small",onClick:()=>{const l=D(i.id);v(l.data),u("edit")}}),e.jsx(s,{type:"link",icon:e.jsx(V,{style:{color:"red"}}),size:"small",onClick:()=>I(i)})]})}]],w=a=>{if(a&&a.__cancel){u("list");return}if(g==="edit"){const i=d.data.items.findIndex(l=>l.id===t.id);i!==-1&&(d.data.items[i]={...d.data.items[i],...a,updated_at:new Date().toISOString()},S.success("Activity updated successfully"))}else{const i=String(Math.max(...d.data.items.map(h=>parseInt(h.id)),0)+1),l=d.data.items.filter(h=>h.project_id===r).map(h=>{const A=h.task_id.match(/TASK-(\d+)/);return A?parseInt(A[1]):0}),F=l.length>0?Math.max(...l):0,M=`TASK-${String(F+1).padStart(3,"0")}`,E={id:i,project_id:r,task_id:M,...a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};d.data.items.push(E),S.success("Activity created successfully")}u("list")},_=()=>{u("list")},P=()=>{u("edit")},I=a=>{$.confirm({title:"Konfirmasi Hapus",content:"Apakah Anda yakin ingin menghapus activity ini?",okText:"Delete",cancelText:"Cancel",okType:"danger",onOk(){const i=d.data.items.findIndex(l=>l.id===a.id);i!==-1&&(d.data.items.splice(i,1),S.success("Activity successfully deleted"))}})};return g==="detail"&&t?e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(p,{align:"center",justify:"space-between",style:{width:"100%",paddingTop:"16px",paddingBottom:"16px"},children:[e.jsxs(p,{align:"center",gap:12,children:[e.jsx(s,{icon:e.jsx(k,{}),onClick:_,type:"text"}),e.jsxs(n,{strong:!0,style:{fontSize:"18px"},children:["Activity Details: ",t.task_id||""]})]}),!j&&e.jsxs(p,{gap:10,children:[e.jsx(s,{htmlType:"button",onClick:()=>I(t),danger:!0,children:"Delete"}),e.jsx(s,{htmlType:"button",type:"primary",onClick:P,children:"Edit"})]})]}),e.jsxs(o,{bodyStyle:{padding:0},bordered:!1,children:[e.jsx(o,{title:"Basic Information",bodyStyle:{padding:24},children:e.jsx(x,{bordered:!0,layout:"horizontal",labelStyle:{width:"200px"},contentStyle:{width:"calc(50% - 200px)"},items:[{key:"task_id",label:"Task ID",children:e.jsx(n,{strong:!0,children:t.task_id??"-"})},{key:"fase",label:"Fase",children:e.jsx(c,{color:t.fase==="Perencanaan"?"blue":t.fase==="Pengembangan"?"green":t.fase==="In HPO"?"orange":t.fase==="FID"?"purple":"default",children:t.fase??"-"})},{key:"bulan_pelaporan",label:"Bulan Pelaporan",children:e.jsx(n,{strong:!0,children:t.bulan_pelaporan?b(t.bulan_pelaporan,"MMMM YYYY"):"-"}),span:2}],column:{md:1,lg:2,xl:2,xxl:2}})}),e.jsx(o,{title:"Activity Progress",style:{marginTop:24},bodyStyle:{padding:24},children:e.jsx(x,{bordered:!0,layout:"horizontal",labelStyle:{width:"200px"},contentStyle:{width:"calc(50% - 200px)"},items:[{key:"aktivitas_bulan_sebelumnya",label:"Aktivitas Bulan Berjalan",children:e.jsx(n,{strong:!0,children:t.aktivitas_bulan_sebelumnya??"-"})},{key:"status_bulan_sebelumnya",label:"Status Berjalan",children:e.jsx(c,{color:t.status_bulan_sebelumnya==="Not Started"?"default":t.status_bulan_sebelumnya==="In Progress"?"blue":t.status_bulan_sebelumnya==="Completed"?"green":t.status_bulan_sebelumnya==="On Hold"?"orange":t.status_bulan_sebelumnya==="Cancelled"?"red":"default",children:t.status_bulan_sebelumnya??"-"})},{key:"aktivitas_bulan_berjalan",label:"Aktivitas Bulan Selanjutnya",children:e.jsx(n,{strong:!0,children:t.aktivitas_bulan_berjalan??"-"})},{key:"status_bulan_berjalan",label:"Status Selanjutnya",children:e.jsx(c,{color:t.status_bulan_berjalan==="Not Started"?"default":t.status_bulan_berjalan==="In Progress"?"blue":t.status_bulan_berjalan==="Completed"?"green":t.status_bulan_berjalan==="On Hold"?"orange":t.status_bulan_berjalan==="Cancelled"?"red":"default",children:t.status_bulan_berjalan??"-"})}],column:{md:1,lg:2,xl:2,xxl:2}})}),e.jsx(o,{title:"Activity Details",style:{marginTop:24},bodyStyle:{padding:24},children:e.jsx(x,{bordered:!0,layout:"horizontal",labelStyle:{width:"200px"},contentStyle:{width:"calc(50% - 200px)"},items:[{key:"pic_aktivitas",label:"PIC Aktivitas",children:e.jsx(n,{strong:!0,children:t.pic_aktivitas??"-"})},{key:"tanggal_aktivitas",label:"Tanggal Aktivitas",children:e.jsx(n,{strong:!0,children:t.tanggal_aktivitas?b(t.tanggal_aktivitas):"-"})},{key:"aktivitas",label:"Aktivitas",children:e.jsx(n,{strong:!0,children:t.aktivitas??"-"}),span:2},{key:"critical_task",label:"Critical Task",children:e.jsx(c,{color:t.critical_task?"green":"red",children:t.critical_task?"Yes":"No"})},{key:"latest_modified",label:"Latest Modified",children:e.jsx(n,{strong:!0,children:t.latest_modified?b(t.latest_modified):"-"})}],column:{md:1,lg:2,xl:2,xxl:2}})}),e.jsx(o,{title:"Documentation",style:{marginTop:24},bodyStyle:{padding:24},children:e.jsx(x,{bordered:!0,layout:"horizontal",labelStyle:{width:"200px"},contentStyle:{width:"calc(50% - 200px)"},items:[{key:"keterangan_foto",label:"Keterangan Foto",children:e.jsx(n,{strong:!0,children:t.keterangan_foto??"-"}),span:2},{key:"keterangan",label:"Keterangan",children:e.jsx(n,{strong:!0,children:t.keterangan??"-"}),span:2}],column:{md:1,lg:2,xl:2,xxl:2}})}),e.jsx(o,{title:"System Information",style:{marginTop:24},bodyStyle:{padding:24},children:e.jsx(x,{bordered:!0,layout:"horizontal",labelStyle:{width:"200px"},contentStyle:{width:"calc(50% - 200px)"},items:[{key:"created_at",label:"Created At",children:e.jsx(n,{strong:!0,children:t.created_at?b(t.created_at):"-"})},{key:"updated_at",label:"Updated At",children:e.jsx(n,{strong:!0,children:t.updated_at?b(t.updated_at):"-"})}],column:{md:1,lg:2,xl:2,xxl:2}})})]})]}):g==="create"?e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(p,{align:"center",gap:12,style:{paddingTop:"16px",paddingBottom:"16px"},children:[e.jsx(s,{icon:e.jsx(k,{}),onClick:_,type:"text"}),e.jsx(n,{strong:!0,style:{fontSize:"18px"},children:"Create New Activity"})]}),e.jsx(T,{formProps:{},error:null,loading:!1,isEdit:!1,isView:!1,initialData:null,onSubmit:w})]}):g==="edit"&&t?e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(p,{align:"center",gap:12,style:{paddingTop:"16px",paddingBottom:"16px"},children:[e.jsx(s,{icon:e.jsx(k,{}),onClick:_,type:"text"}),e.jsxs(n,{strong:!0,style:{fontSize:"18px"},children:["Edit Activity: ",t.task_id||""]})]}),e.jsx(T,{formProps:{},error:null,loading:!1,isEdit:!0,isView:!1,initialData:t,onSubmit:w})]}):e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(o,{bodyStyle:{padding:24},children:e.jsxs(p,{align:"center",justify:"space-between",style:{width:"100%"},children:[e.jsx(n,{strong:!0,style:{fontSize:"16px"},children:"Current Activities"}),!j&&e.jsx(s,{type:"primary",icon:e.jsx(Y,{}),onClick:()=>u("create"),children:"Add New Activity"})]})}),e.jsx(o,{bodyStyle:{padding:0},bordered:!1,children:e.jsx(H,{rowKey:"id",loading:N||y.loading,source:R(y.data),columns:z,search:B(),hideSearch:!0,showRowSelection:!1,scroll:{x:1200},pagination:{sticky:!0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,i)=>`${i[0]}-${i[1]} of ${a} items`}})})]})};export{De as default};
//# sourceMappingURL=ProjectActivitiesContent-D-UDWGjN.js.map
