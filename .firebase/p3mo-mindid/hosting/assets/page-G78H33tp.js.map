{"version":3,"file":"page-G78H33tp.js","sources":["../../src/app/(protected)/messaging/page.jsx"],"sourcesContent":["import { Button, Flex, message, Tag, Modal } from \"antd\";\nimport { DeleteOutlined, EditOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router\";\nimport { Page, DataTable } from \"admiral\";\n\nimport { makeSource } from \"@/utils/data-table\";\nimport { useFilter } from \"@/app/_hooks/datatable/use-filter\";\nimport { urlParser } from \"@/utils/url-parser\";\nimport { useGetData } from \"@/app/_hooks/use-get-data\";\nimport { formatDate } from \"@/utils/date-format\";\nimport { allMessaging } from \"./_data\";\n\nexport const Component = () => {\n  const { handleChange, filters } = useFilter();\n\n  const allMessagingData = useGetData(allMessaging);\n\n  const allMessagingColumns = [\n    {\n      dataIndex: \"subject\",\n      key: \"subject\",\n      title: \"Subject\",\n      sorter: true,\n      render: (_, record) => (\n        <Link to={record.id}>\n          <u>{record.subject}</u>\n        </Link>\n      ),\n    },\n    {\n      dataIndex: \"to\",\n      title: \"To\",\n      key: \"to\",\n      sorter: false,\n      render: (_, record) => {\n        const recipients = record.to || [];\n        if (recipients.length === 0) return \"-\";\n        \n        if (recipients.length === 1) {\n          return recipients[0];\n        }\n        \n        if (recipients.length <= 3) {\n          return recipients.join(\", \");\n        }\n        \n        return `${recipients.slice(0, 2).join(\", \")} +${recipients.length - 2} more`;\n      },\n    },\n    {\n      dataIndex: \"cc\",\n      title: \"CC\",\n      key: \"cc\",\n      sorter: false,\n      render: (_, record) => {\n        const ccRecipients = record.cc || [];\n        if (ccRecipients.length === 0) return \"-\";\n        \n        if (ccRecipients.length === 1) {\n          return ccRecipients[0];\n        }\n        \n        if (ccRecipients.length <= 2) {\n          return ccRecipients.join(\", \");\n        }\n        \n        return `${ccRecipients.slice(0, 1).join(\", \")} +${ccRecipients.length - 1} more`;\n      },\n    },\n    {\n      dataIndex: \"via\",\n      title: \"Via\",\n      key: \"via\",\n      sorter: true,\n      render: (_, record) => {\n        if (record.via === \"Keduanya\") {\n          return (\n            <>\n              <Tag color=\"orange\" style={{ border: 'none' }}>Apps</Tag>\n              <Tag color=\"green\" style={{ border: 'none' }}>Email</Tag>\n            </>\n          );\n        }\n        \n        let color = \"blue\";\n        if (record.via === \"Email\") color = \"green\";\n        else if (record.via === \"Apps\") color = \"orange\";\n        \n        return <Tag color={color} style={{ border: 'none' }}>{record.via}</Tag>;\n      },\n    },\n    {\n      dataIndex: \"created_at\",\n      title: \"Created At\",\n      key: \"created_at\",\n      sorter: true,\n      render: (_, record) => {\n        return formatDate(record.created_at);\n      },\n    },\n    {\n      dataIndex: \"Action\",\n      title: \"Action\",\n      key: \"Action\",\n      render: (_, record) => {\n        return (\n          <Flex>\n            <Link\n              to={urlParser(\"/messaging/:id/update\", {\n                id: record.id,\n              })}\n            >\n              <Button type=\"link\" icon={<EditOutlined />} />\n            </Link>\n            <Button\n              type=\"link\"\n              icon={<DeleteOutlined style={{ color: \"red\" }} />}\n              onClick={() => {\n                Modal.confirm({\n                  title: 'Delete Message',\n                  content: 'Are you sure you want to delete this message?',\n                  okText: 'Delete',\n                  cancelText: 'Cancel',\n                  okType: 'danger',\n                  onOk() {\n                    message.success(\"Message successfully deleted\");\n                  },\n                });\n              }}\n            />\n          </Flex>\n        );\n      },\n    },\n  ];\n\n  const breadcrumbs = [\n    {\n      label: \"Messaging\",\n      path: \"/messaging\",\n    },\n  ];\n\n  return (\n    <Page\n      title=\"Messaging\"\n      breadcrumbs={breadcrumbs}\n      topActions={\n        <Link to={\"/messaging/create\"}>\n          <Button type=\"primary\" icon={<PlusOutlined />}>Compose Message</Button>\n        </Link>\n      }\n      noStyle\n    >\n      <DataTable\n        filterComponents={[\n          {\n            label: \"Via\",\n            name: \"via\",\n            type: \"Select\",\n            placeholder: \"Select delivery method\",\n            width: 160,\n            defaultValue: filters.via,\n            options: [\n              { label: \"Apps\", value: \"Apps\" },\n              { label: \"Email\", value: \"Email\" },\n              { label: \"Keduanya\", value: \"Keduanya\" },\n            ],\n          },\n          {\n            label: \"Status\",\n            name: \"status\",\n            type: \"Select\",\n            placeholder: \"Select status\",\n            width: 140,\n            defaultValue: filters.status,\n            options: [\n              { label: \"Sent\", value: \"Sent\" },\n              { label: \"Draft\", value: \"Draft\" },\n            ],\n          },\n        ]}\n        onChange={handleChange}\n        rowKey=\"id\"\n        loading={allMessagingData.loading}\n        source={makeSource(allMessagingData.data)}\n        columns={allMessagingColumns}\n        search={filters.search}\n        showRowSelection={true}\n        batchActionMenus={[\n          {\n            key: \"delete\",\n            label: \"Delete\",\n            onClick: (_values, cb) => {\n              Modal.confirm({\n                title: 'Delete Selected Messages',\n                content: 'Are you sure you want to delete the selected messages?',\n                okText: 'Delete',\n                cancelText: 'Cancel',\n                okType: 'danger',\n                onOk() {\n                  message.success(\"Selected messages successfully deleted\");\n                  cb.reset();\n                },\n              });\n            },\n            danger: true,\n            icon: <DeleteOutlined />,\n          },\n        ]}\n      />\n    </Page>\n  );\n};\n\nexport default Component;\n"],"names":["Component","handleChange","filters","useFilter","allMessagingData","useGetData","allMessaging","allMessagingColumns","_","record","jsx","Link","recipients","ccRecipients","jsxs","Fragment","Tag","color","formatDate","Flex","urlParser","Button","EditOutlined","DeleteOutlined","Modal","message","breadcrumbs","Page","PlusOutlined","DataTable","makeSource","_values","cb"],"mappings":"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"}